"use strict";(self.webpackChunksmart_pet_feeder=self.webpackChunksmart_pet_feeder||[]).push([[588],{588:(e,s,d)=>{d.r(s),d.d(s,{default:()=>t});var a=d(43),l=d(584),i=d(579);const t=()=>{const[e,s]=(0,a.useState)([]),[d,t]=(0,a.useState)({time:"",amount:0,device_id:""}),[r,n]=(0,a.useState)(!1);(0,a.useEffect)((()=>{(async()=>{var e;const{data:d,error:a}=await l.N.from("schedules").select("*").eq("user_id",null===(e=l.N.auth.user())||void 0===e?void 0:e.id);a?console.error("Error fetching schedules:",a):s(d)})()}),[]);return(0,i.jsxs)("div",{className:"schedule-page",children:[(0,i.jsx)("h1",{children:"Schedules"}),(0,i.jsx)("button",{className:"btn btn-primary",onClick:()=>n(!0),children:"Add Schedule"}),(0,i.jsx)("ul",{className:"schedule-list",children:e.map((e=>(0,i.jsx)("li",{className:"schedule-item",children:(0,i.jsxs)("div",{className:"schedule-info",children:[(0,i.jsxs)("p",{children:["Time: ",e.time]}),(0,i.jsxs)("p",{children:["Amount: ",e.amount]}),(0,i.jsxs)("p",{children:["Device ID: ",e.device_id]})]})},e.schedule_id)))}),r&&(0,i.jsx)("div",{className:"modal",children:(0,i.jsxs)("div",{className:"modal-content",children:[(0,i.jsx)("div",{className:"modal-header",children:(0,i.jsx)("h2",{children:"Add Schedule"})}),(0,i.jsxs)("form",{onSubmit:async a=>{var i;a.preventDefault();const{data:r,error:c}=await l.N.from("schedules").insert([{...d,user_id:null===(i=l.N.auth.user())||void 0===i?void 0:i.id}]);c?console.error("Error adding schedule:",c):(s([...e,r[0]]),n(!1),t({time:"",amount:0,device_id:""}))},children:[(0,i.jsxs)("div",{className:"modal-body",children:[(0,i.jsxs)("label",{children:["Time:",(0,i.jsx)("input",{type:"datetime-local",value:d.time,onChange:e=>t({...d,time:e.target.value}),required:!0})]}),(0,i.jsxs)("label",{children:["Amount:",(0,i.jsx)("input",{type:"number",value:d.amount,onChange:e=>t({...d,amount:parseInt(e.target.value)}),required:!0})]}),(0,i.jsxs)("label",{children:["Device ID:",(0,i.jsx)("input",{type:"text",value:d.device_id,onChange:e=>t({...d,device_id:e.target.value}),required:!0})]})]}),(0,i.jsxs)("div",{className:"modal-footer",children:[(0,i.jsx)("button",{className:"btn btn-outline",onClick:()=>n(!1),children:"Cancel"}),(0,i.jsx)("button",{className:"btn btn-primary",type:"submit",children:"Add Schedule"})]})]})]})})]})}}}]);
//# sourceMappingURL=588.4dcfb992.chunk.js.map