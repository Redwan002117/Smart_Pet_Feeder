{"ast":null,"code":"import React,{useState,useEffect}from'react';import{supabase}from'../supabaseClient.ts';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const SchedulePage=()=>{const[schedules,setSchedules]=useState([]);const[newSchedule,setNewSchedule]=useState({time:'',amount:0,device_id:''});const[showForm,setShowForm]=useState(false);useEffect(()=>{const fetchSchedules=async()=>{var _supabase$auth$user;const{data,error}=await supabase.from('schedules').select('*').eq('user_id',(_supabase$auth$user=supabase.auth.user())===null||_supabase$auth$user===void 0?void 0:_supabase$auth$user.id);if(error){console.error('Error fetching schedules:',error);}else{setSchedules(data);}};fetchSchedules();},[]);const handleAddSchedule=async e=>{var _supabase$auth$user2;e.preventDefault();const{data,error}=await supabase.from('schedules').insert([{...newSchedule,user_id:(_supabase$auth$user2=supabase.auth.user())===null||_supabase$auth$user2===void 0?void 0:_supabase$auth$user2.id}]);if(error){console.error('Error adding schedule:',error);}else{setSchedules([...schedules,data[0]]);setShowForm(false);setNewSchedule({time:'',amount:0,device_id:''});}};return/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-page\",children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Schedules\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",onClick:()=>setShowForm(true),children:\"Add Schedule\"}),/*#__PURE__*/_jsx(\"ul\",{className:\"schedule-list\",children:schedules.map(schedule=>/*#__PURE__*/_jsx(\"li\",{className:\"schedule-item\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"schedule-info\",children:[/*#__PURE__*/_jsxs(\"p\",{children:[\"Time: \",schedule.time]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Amount: \",schedule.amount]}),/*#__PURE__*/_jsxs(\"p\",{children:[\"Device ID: \",schedule.device_id]})]})},schedule.schedule_id))}),showForm&&/*#__PURE__*/_jsx(\"div\",{className:\"modal\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"modal-content\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"modal-header\",children:/*#__PURE__*/_jsx(\"h2\",{children:\"Add Schedule\"})}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleAddSchedule,children:[/*#__PURE__*/_jsxs(\"div\",{className:\"modal-body\",children:[/*#__PURE__*/_jsxs(\"label\",{children:[\"Time:\",/*#__PURE__*/_jsx(\"input\",{type:\"datetime-local\",value:newSchedule.time,onChange:e=>setNewSchedule({...newSchedule,time:e.target.value}),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Amount:\",/*#__PURE__*/_jsx(\"input\",{type:\"number\",value:newSchedule.amount,onChange:e=>setNewSchedule({...newSchedule,amount:parseInt(e.target.value)}),required:true})]}),/*#__PURE__*/_jsxs(\"label\",{children:[\"Device ID:\",/*#__PURE__*/_jsx(\"input\",{type:\"text\",value:newSchedule.device_id,onChange:e=>setNewSchedule({...newSchedule,device_id:e.target.value}),required:true})]})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"modal-footer\",children:[/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-outline\",onClick:()=>setShowForm(false),children:\"Cancel\"}),/*#__PURE__*/_jsx(\"button\",{className:\"btn btn-primary\",type:\"submit\",children:\"Add Schedule\"})]})]})]})})]});};export default SchedulePage;","map":{"version":3,"names":["React","useState","useEffect","supabase","jsx","_jsx","jsxs","_jsxs","SchedulePage","schedules","setSchedules","newSchedule","setNewSchedule","time","amount","device_id","showForm","setShowForm","fetchSchedules","_supabase$auth$user","data","error","from","select","eq","auth","user","id","console","handleAddSchedule","e","_supabase$auth$user2","preventDefault","insert","user_id","className","children","onClick","map","schedule","schedule_id","onSubmit","type","value","onChange","target","required","parseInt"],"sources":["/workspaces/Smart_Pet_Feeder/src/pages/Schedule.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { supabase } from '../supabaseClient.ts';\nimport { Schedule } from '../types';\n\nconst SchedulePage: React.FC = () => {\n  const [schedules, setSchedules] = useState<Schedule[]>([]);\n  const [newSchedule, setNewSchedule] = useState({ time: '', amount: 0, device_id: '' });\n  const [showForm, setShowForm] = useState(false);\n\n  useEffect(() => {\n    const fetchSchedules = async () => {\n      const { data, error } = await supabase\n        .from('schedules')\n        .select('*')\n        .eq('user_id', supabase.auth.user()?.id);\n\n      if (error) {\n        console.error('Error fetching schedules:', error);\n      } else {\n        setSchedules(data);\n      }\n    };\n\n    fetchSchedules();\n  }, []);\n\n  const handleAddSchedule = async (e: React.FormEvent) => {\n    e.preventDefault();\n    const { data, error } = await supabase\n      .from('schedules')\n      .insert([{ ...newSchedule, user_id: supabase.auth.user()?.id }]);\n\n    if (error) {\n      console.error('Error adding schedule:', error);\n    } else {\n      setSchedules([...schedules, data[0]]);\n      setShowForm(false);\n      setNewSchedule({ time: '', amount: 0, device_id: '' });\n    }\n  };\n\n  return (\n    <div className=\"schedule-page\">\n      <h1>Schedules</h1>\n      <button className=\"btn btn-primary\" onClick={() => setShowForm(true)}>\n        Add Schedule\n      </button>\n      <ul className=\"schedule-list\">\n        {schedules.map(schedule => (\n          <li key={schedule.schedule_id} className=\"schedule-item\">\n            <div className=\"schedule-info\">\n              <p>Time: {schedule.time}</p>\n              <p>Amount: {schedule.amount}</p>\n              <p>Device ID: {schedule.device_id}</p>\n            </div>\n          </li>\n        ))}\n      </ul>\n\n      {showForm && (\n        <div className=\"modal\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Add Schedule</h2>\n            </div>\n            <form onSubmit={handleAddSchedule}>\n              <div className=\"modal-body\">\n                <label>\n                  Time:\n                  <input\n                    type=\"datetime-local\"\n                    value={newSchedule.time}\n                    onChange={e => setNewSchedule({ ...newSchedule, time: e.target.value })}\n                    required\n                  />\n                </label>\n                <label>\n                  Amount:\n                  <input\n                    type=\"number\"\n                    value={newSchedule.amount}\n                    onChange={e => setNewSchedule({ ...newSchedule, amount: parseInt(e.target.value) })}\n                    required\n                  />\n                </label>\n                <label>\n                  Device ID:\n                  <input\n                    type=\"text\"\n                    value={newSchedule.device_id}\n                    onChange={e => setNewSchedule({ ...newSchedule, device_id: e.target.value })}\n                    required\n                  />\n                </label>\n              </div>\n              <div className=\"modal-footer\">\n                <button className=\"btn btn-outline\" onClick={() => setShowForm(false)}>\n                  Cancel\n                </button>\n                <button className=\"btn btn-primary\" type=\"submit\">\n                  Add Schedule\n                </button>\n              </div>\n            </form>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default SchedulePage;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}