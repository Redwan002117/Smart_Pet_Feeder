{"ast":null,"code":"import React,{useState,useEffect}from'react';import{BrowserRouter as Router,Routes,Route,Navigate}from'react-router-dom';import{supabase,checkSystemClock}from'./supabaseClient.ts';import Header from'./components/Header.tsx';import Home from'./pages/Home.tsx';import Login from'./pages/Login.tsx';import SignUp from'./pages/SignUp.tsx';import ProtectedRoute from'./components/ProtectedRoute.tsx';import AdminRoute from'./components/AdminRoute.tsx';import'./styles/global.css';// Lazy load components for better performance\nimport{jsx as _jsx,jsxs as _jsxs,Fragment as _Fragment}from\"react/jsx-runtime\";const Dashboard=/*#__PURE__*/React.lazy(()=>import('./pages/Dashboard.tsx'));const Devices=/*#__PURE__*/React.lazy(()=>import('./pages/Devices.tsx'));const DeviceSetup=/*#__PURE__*/React.lazy(()=>import('./pages/DeviceSetup.tsx'));const Pets=/*#__PURE__*/React.lazy(()=>import('./pages/Pets.tsx'));const Schedule=/*#__PURE__*/React.lazy(()=>import('./pages/Schedule.tsx'));const History=/*#__PURE__*/React.lazy(()=>import('./pages/History.tsx'));const Profile=/*#__PURE__*/React.lazy(()=>import('./pages/Profile.tsx'));const Settings=/*#__PURE__*/React.lazy(()=>import('./pages/Settings.tsx'));const AdminDashboard=/*#__PURE__*/React.lazy(()=>import('./pages/AdminDashboard.tsx'));const UserManagement=/*#__PURE__*/React.lazy(()=>import('./pages/UserManagement.tsx'));const AdminSettings=/*#__PURE__*/React.lazy(()=>import('./pages/AdminSettings.tsx'));const ForgotPassword=/*#__PURE__*/React.lazy(()=>import('./pages/ForgotPassword.tsx'));const AuthCallback=/*#__PURE__*/React.lazy(()=>import('./pages/AuthCallback.tsx'));const App=()=>{const[session,setSession]=useState(null);const[loading,setLoading]=useState(true);const[userProfile,setUserProfile]=useState(null);const[userPreferences,setUserPreferences]=useState(null);const[isAdmin,setIsAdmin]=useState(false);const[timeSkewDetected,setTimeSkewDetected]=useState(false);useEffect(()=>{// Check for system clock issues on app load\nconst verifySystemClock=async()=>{const clockCheck=await checkSystemClock();if(clockCheck.hasSkew){setTimeSkewDetected(true);console.warn(`System clock is off by ${clockCheck.skewSeconds} seconds. Adjust your system time for proper authentication.`);}};verifySystemClock();// Set up auth state listener\nconst{data:authListener}=supabase.auth.onAuthStateChange(async(event,session)=>{setSession(session);// If session exists, fetch user profile and preferences\nif(session){await fetchUserData(session);}else{setUserProfile(null);setUserPreferences(null);setIsAdmin(false);}setLoading(false);});// Initial session check\nconst checkSession=async()=>{try{// Add extra handling for potential token issues\nconst{data:{session},error}=await supabase.auth.getSession();if(error){if(error.message.includes('future')||error.message.includes('clock skew')){setTimeSkewDetected(true);console.error(\"Authentication error likely due to clock skew:\",error.message);}// ...rest of your error handling...\n}setSession(session);if(session){await fetchUserData(session);}setLoading(false);}catch(err){console.error(\"Error checking session:\",err);}};checkSession();// Apply theme and dark mode from localStorage for initial render\nconst storedTheme=localStorage.getItem('theme')||'orange';const storedDarkMode=localStorage.getItem('darkMode')==='true';document.body.classList.add(`theme-${storedTheme}`);if(storedDarkMode){document.body.classList.add('dark-mode');}// Cleanup\nreturn()=>{authListener.subscription.unsubscribe();};},[]);const fetchUserData=async session=>{try{// Fetch user profile\nconst{data:profile,error:profileError}=await supabase.from('profiles').select('*').eq('id',session.user.id).single();if(profileError)throw profileError;setUserProfile(profile);// Fetch user preferences\nconst{data:preferences,error:prefError}=await supabase.from('user_preferences').select('*').eq('id',session.user.id).single();if(preferences){setUserPreferences(preferences);// Apply theme and dark mode from preferences\ndocument.body.classList.remove('theme-orange','theme-blue','theme-purple');document.body.classList.add(`theme-${preferences.theme}`);if(preferences.dark_mode){document.body.classList.add('dark-mode');}else{document.body.classList.remove('dark-mode');}// Save to localStorage as well\nlocalStorage.setItem('theme',preferences.theme);localStorage.setItem('darkMode',preferences.dark_mode.toString());}else if(prefError&&prefError.code!=='PGRST116'){// If error is not \"no rows returned\" error\nconsole.error(\"Error fetching user preferences:\",prefError);}// Check if user is admin\nconst isAdminUser=session.user.email==='petfeeder@redwancodes.com'||profile&&profile.role==='admin';setIsAdmin(isAdminUser);}catch(error){console.error(\"Error fetching user data:\",error);}};const handleThemeChange=theme=>{// Theme changes will be handled by the Header component directly\n// since it updates both localStorage and user preferences in the database\n};const handleDarkModeToggle=()=>{// Dark mode toggle will be handled by the Header component directly\n// since it updates both localStorage and user preferences in the database\n};if(loading){return/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading Smart Pet Feeder...\"})]});}// Add a time skew warning if detected\nconst renderTimeSkewWarning=()=>{if(timeSkewDetected){return/*#__PURE__*/_jsx(\"div\",{className:\"time-skew-warning\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"warning-content\",children:[/*#__PURE__*/_jsx(\"i\",{className:\"warning-icon\",children:\"\\u26A0\\uFE0F\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Your device clock appears to be incorrect. Please sync your system time for proper functionality.\"}),/*#__PURE__*/_jsx(\"button\",{onClick:()=>setTimeSkewDetected(false),children:\"Dismiss\"})]})});}return null;};return/*#__PURE__*/_jsxs(_Fragment,{children:[renderTimeSkewWarning(),/*#__PURE__*/_jsxs(Router,{children:[/*#__PURE__*/_jsx(Header,{session:session,profile:userProfile,isAdmin:isAdmin,userPreferences:userPreferences,onThemeChange:handleThemeChange,onDarkModeToggle:handleDarkModeToggle}),/*#__PURE__*/_jsx(\"main\",{className:`main-content ${session?'authenticated':''}`,children:/*#__PURE__*/_jsx(React.Suspense,{fallback:/*#__PURE__*/_jsxs(\"div\",{className:\"loading-container\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"loading-spinner\"}),/*#__PURE__*/_jsx(\"p\",{children:\"Loading...\"})]}),children:/*#__PURE__*/_jsxs(Routes,{children:[/*#__PURE__*/_jsx(Route,{path:\"/\",element:/*#__PURE__*/_jsx(Home,{})}),/*#__PURE__*/_jsx(Route,{path:\"/login\",element:/*#__PURE__*/_jsx(Login,{})}),/*#__PURE__*/_jsx(Route,{path:\"/signup\",element:/*#__PURE__*/_jsx(SignUp,{})}),/*#__PURE__*/_jsx(Route,{path:\"/forgot-password\",element:/*#__PURE__*/_jsx(ForgotPassword,{})}),/*#__PURE__*/_jsx(Route,{path:\"/auth/callback\",element:/*#__PURE__*/_jsx(AuthCallback,{})}),/*#__PURE__*/_jsx(Route,{path:\"/dashboard\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(Dashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/devices\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(Devices,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/device-setup\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(DeviceSetup,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/pets\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(Pets,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/schedule\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(Schedule,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/history\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(History,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/profile\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(Profile,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/settings\",element:/*#__PURE__*/_jsx(ProtectedRoute,{session:session,children:/*#__PURE__*/_jsx(Settings,{userPreferences:userPreferences})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin\",element:/*#__PURE__*/_jsx(AdminRoute,{session:session,children:/*#__PURE__*/_jsx(AdminDashboard,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/users\",element:/*#__PURE__*/_jsx(AdminRoute,{session:session,children:/*#__PURE__*/_jsx(UserManagement,{})})}),/*#__PURE__*/_jsx(Route,{path:\"/admin/settings\",element:/*#__PURE__*/_jsx(AdminRoute,{session:session,children:/*#__PURE__*/_jsx(AdminSettings,{})})}),/*#__PURE__*/_jsx(Route,{path:\"*\",element:/*#__PURE__*/_jsx(Navigate,{to:\"/\"})})]})})})]})]});};export default App;","map":{"version":3,"names":["React","useState","useEffect","BrowserRouter","Router","Routes","Route","Navigate","supabase","checkSystemClock","Header","Home","Login","SignUp","ProtectedRoute","AdminRoute","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","Dashboard","lazy","Devices","DeviceSetup","Pets","Schedule","History","Profile","Settings","AdminDashboard","UserManagement","AdminSettings","ForgotPassword","AuthCallback","App","session","setSession","loading","setLoading","userProfile","setUserProfile","userPreferences","setUserPreferences","isAdmin","setIsAdmin","timeSkewDetected","setTimeSkewDetected","verifySystemClock","clockCheck","hasSkew","console","warn","skewSeconds","data","authListener","auth","onAuthStateChange","event","fetchUserData","checkSession","error","getSession","message","includes","err","storedTheme","localStorage","getItem","storedDarkMode","document","body","classList","add","subscription","unsubscribe","profile","profileError","from","select","eq","user","id","single","preferences","prefError","remove","theme","dark_mode","setItem","toString","code","isAdminUser","email","role","handleThemeChange","handleDarkModeToggle","className","children","renderTimeSkewWarning","onClick","onThemeChange","onDarkModeToggle","Suspense","fallback","path","element","to"],"sources":["/workspaces/Smart_Pet_Feeder/src/App.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { BrowserRouter as Router, Routes, Route, Navigate } from 'react-router-dom';\nimport { supabase, checkSystemClock } from './supabaseClient.ts';\nimport Header from './components/Header.tsx';\nimport Home from './pages/Home.tsx';\nimport Login from './pages/Login.tsx';\nimport SignUp from './pages/SignUp.tsx';\nimport ProtectedRoute from './components/ProtectedRoute.tsx';\nimport AdminRoute from './components/AdminRoute.tsx';\nimport './styles/global.css';\n\n// Lazy load components for better performance\nconst Dashboard = React.lazy(() => import('./pages/Dashboard.tsx'));\nconst Devices = React.lazy(() => import('./pages/Devices.tsx'));\nconst DeviceSetup = React.lazy(() => import('./pages/DeviceSetup.tsx'));\nconst Pets = React.lazy(() => import('./pages/Pets.tsx'));\nconst Schedule = React.lazy(() => import('./pages/Schedule.tsx'));\nconst History = React.lazy(() => import('./pages/History.tsx'));\nconst Profile = React.lazy(() => import('./pages/Profile.tsx'));\nconst Settings = React.lazy(() => import('./pages/Settings.tsx'));\nconst AdminDashboard = React.lazy(() => import('./pages/AdminDashboard.tsx'));\nconst UserManagement = React.lazy(() => import('./pages/UserManagement.tsx'));\nconst AdminSettings = React.lazy(() => import('./pages/AdminSettings.tsx'));\nconst ForgotPassword = React.lazy(() => import('./pages/ForgotPassword.tsx'));\nconst AuthCallback = React.lazy(() => import('./pages/AuthCallback.tsx'));\n\nconst App: React.FC = () => {\n  const [session, setSession] = useState<any>(null);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [userProfile, setUserProfile] = useState<any>(null);\n  const [userPreferences, setUserPreferences] = useState<any>(null);\n  const [isAdmin, setIsAdmin] = useState<boolean>(false);\n  const [timeSkewDetected, setTimeSkewDetected] = useState(false);\n\n  useEffect(() => {\n    // Check for system clock issues on app load\n    const verifySystemClock = async () => {\n      const clockCheck = await checkSystemClock();\n      if (clockCheck.hasSkew) {\n        setTimeSkewDetected(true);\n        console.warn(`System clock is off by ${clockCheck.skewSeconds} seconds. Adjust your system time for proper authentication.`);\n      }\n    };\n    \n    verifySystemClock();\n\n    // Set up auth state listener\n    const { data: authListener } = supabase.auth.onAuthStateChange(\n      async (event, session) => {\n        setSession(session);\n        \n        // If session exists, fetch user profile and preferences\n        if (session) {\n          await fetchUserData(session);\n        } else {\n          setUserProfile(null);\n          setUserPreferences(null);\n          setIsAdmin(false);\n        }\n        \n        setLoading(false);\n      }\n    );\n\n    // Initial session check\n    const checkSession = async () => {\n      try {\n        // Add extra handling for potential token issues\n        const { data: { session }, error } = await supabase.auth.getSession();\n        if (error) {\n          if (error.message.includes('future') || error.message.includes('clock skew')) {\n            setTimeSkewDetected(true);\n            console.error(\"Authentication error likely due to clock skew:\", error.message);\n          }\n          // ...rest of your error handling...\n        }\n        setSession(session);\n        \n        if (session) {\n          await fetchUserData(session);\n        }\n        \n        setLoading(false);\n      } catch (err) {\n        console.error(\"Error checking session:\", err);\n      }\n    };\n    \n    checkSession();\n\n    // Apply theme and dark mode from localStorage for initial render\n    const storedTheme = localStorage.getItem('theme') || 'orange';\n    const storedDarkMode = localStorage.getItem('darkMode') === 'true';\n    \n    document.body.classList.add(`theme-${storedTheme}`);\n    if (storedDarkMode) {\n      document.body.classList.add('dark-mode');\n    }\n\n    // Cleanup\n    return () => {\n      authListener.subscription.unsubscribe();\n    };\n  }, []);\n\n  const fetchUserData = async (session: any) => {\n    try {\n      // Fetch user profile\n      const { data: profile, error: profileError } = await supabase\n        .from('profiles')\n        .select('*')\n        .eq('id', session.user.id)\n        .single();\n        \n      if (profileError) throw profileError;\n      setUserProfile(profile);\n      \n      // Fetch user preferences\n      const { data: preferences, error: prefError } = await supabase\n        .from('user_preferences')\n        .select('*')\n        .eq('id', session.user.id)\n        .single();\n      \n      if (preferences) {\n        setUserPreferences(preferences);\n        \n        // Apply theme and dark mode from preferences\n        document.body.classList.remove('theme-orange', 'theme-blue', 'theme-purple');\n        document.body.classList.add(`theme-${preferences.theme}`);\n        \n        if (preferences.dark_mode) {\n          document.body.classList.add('dark-mode');\n        } else {\n          document.body.classList.remove('dark-mode');\n        }\n        \n        // Save to localStorage as well\n        localStorage.setItem('theme', preferences.theme);\n        localStorage.setItem('darkMode', preferences.dark_mode.toString());\n      } else if (prefError && prefError.code !== 'PGRST116') {\n        // If error is not \"no rows returned\" error\n        console.error(\"Error fetching user preferences:\", prefError);\n      }\n      \n      // Check if user is admin\n      const isAdminUser = \n        session.user.email === 'petfeeder@redwancodes.com' || \n        (profile && profile.role === 'admin');\n        \n      setIsAdmin(isAdminUser);\n    } catch (error) {\n      console.error(\"Error fetching user data:\", error);\n    }\n  };\n  \n  const handleThemeChange = (theme: string) => {\n    // Theme changes will be handled by the Header component directly\n    // since it updates both localStorage and user preferences in the database\n  };\n  \n  const handleDarkModeToggle = () => {\n    // Dark mode toggle will be handled by the Header component directly\n    // since it updates both localStorage and user preferences in the database\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading Smart Pet Feeder...</p>\n      </div>\n    );\n  }\n\n  // Add a time skew warning if detected\n  const renderTimeSkewWarning = () => {\n    if (timeSkewDetected) {\n      return (\n        <div className=\"time-skew-warning\">\n          <div className=\"warning-content\">\n            <i className=\"warning-icon\">⚠️</i>\n            <p>Your device clock appears to be incorrect. Please sync your system time for proper functionality.</p>\n            <button onClick={() => setTimeSkewDetected(false)}>Dismiss</button>\n          </div>\n        </div>\n      );\n    }\n    return null;\n  };\n\n  return (\n    <>\n      {/* Add the warning at the top of your app */}\n      {renderTimeSkewWarning()}\n      \n      <Router>\n        <Header \n          session={session} \n          profile={userProfile} \n          isAdmin={isAdmin} \n          userPreferences={userPreferences}\n          onThemeChange={handleThemeChange}\n          onDarkModeToggle={handleDarkModeToggle}\n        />\n        <main className={`main-content ${session ? 'authenticated' : ''}`}>\n          <React.Suspense fallback={\n            <div className=\"loading-container\">\n              <div className=\"loading-spinner\"></div>\n              <p>Loading...</p>\n            </div>\n          }>\n            <Routes>\n              {/* Public routes */}\n              <Route path=\"/\" element={<Home />} />\n              <Route path=\"/login\" element={<Login />} />\n              <Route path=\"/signup\" element={<SignUp />} />\n              <Route path=\"/forgot-password\" element={<ForgotPassword />} />\n              <Route path=\"/auth/callback\" element={<AuthCallback />} />\n              \n              {/* Protected routes */}\n              <Route path=\"/dashboard\" element={\n                <ProtectedRoute session={session}>\n                  <Dashboard />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/devices\" element={\n                <ProtectedRoute session={session}>\n                  <Devices />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/device-setup\" element={\n                <ProtectedRoute session={session}>\n                  <DeviceSetup />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/pets\" element={\n                <ProtectedRoute session={session}>\n                  <Pets />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/schedule\" element={\n                <ProtectedRoute session={session}>\n                  <Schedule />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/history\" element={\n                <ProtectedRoute session={session}>\n                  <History />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/profile\" element={\n                <ProtectedRoute session={session}>\n                  <Profile />\n                </ProtectedRoute>\n              } />\n              <Route path=\"/settings\" element={\n                <ProtectedRoute session={session}>\n                  <Settings userPreferences={userPreferences} />\n                </ProtectedRoute>\n              } />\n              \n              {/* Admin routes */}\n              <Route path=\"/admin\" element={\n                <AdminRoute session={session}>\n                  <AdminDashboard />\n                </AdminRoute>\n              } />\n              <Route path=\"/admin/users\" element={\n                <AdminRoute session={session}>\n                  <UserManagement />\n                </AdminRoute>\n              } />\n              <Route path=\"/admin/settings\" element={\n                <AdminRoute session={session}>\n                  <AdminSettings />\n                </AdminRoute>\n              } />\n              \n              {/* Fallback route */}\n              <Route path=\"*\" element={<Navigate to=\"/\" />} />\n            </Routes>\n          </React.Suspense>\n        </main>\n      </Router>\n    </>\n  );\n};\n\nexport default App;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}