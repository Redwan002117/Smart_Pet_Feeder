{"ast":null,"code":"var _jsxFileName = \"/workspaces/Smart_Pet_Feeder/src/pages/Devices.tsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase } from '../supabaseClient.ts';\nimport '../styles/Devices.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst Devices = () => {\n  _s();\n  const [devices, setDevices] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [deleteConfirm, setDeleteConfirm] = useState(null);\n  const [editingDevice, setEditingDevice] = useState(null);\n  const [editName, setEditName] = useState('');\n  useEffect(() => {\n    fetchDevices();\n\n    // Set up realtime subscription for devices\n    const subscription = supabase.channel('devices-changes').on('postgres_changes', {\n      event: '*',\n      schema: 'public',\n      table: 'devices'\n    }, handleDeviceUpdate).subscribe();\n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n  const fetchDevices = async () => {\n    try {\n      setLoading(true);\n\n      // Get current user\n      const {\n        data: {\n          user\n        }\n      } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n\n      // Fetch user's devices\n      const {\n        data,\n        error\n      } = await supabase.from('devices').select('*').eq('user_id', user.id).order('created_at', {\n        ascending: false\n      });\n      if (error) throw error;\n      setDevices(data || []);\n    } catch (err) {\n      console.error('Error fetching devices:', err);\n      setError(err.message || 'Failed to load devices');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle realtime device updates\n  const handleDeviceUpdate = payload => {\n    const {\n      eventType,\n      new: newDevice,\n      old: oldDevice\n    } = payload;\n    if (eventType === 'INSERT') {\n      setDevices(prev => [newDevice, ...prev]);\n    } else if (eventType === 'UPDATE') {\n      setDevices(prev => prev.map(device => device.device_id === newDevice.device_id ? newDevice : device));\n    } else if (eventType === 'DELETE') {\n      setDevices(prev => prev.filter(device => device.device_id !== oldDevice.device_id));\n    }\n  };\n\n  // Delete a device\n  const handleDelete = async deviceId => {\n    try {\n      const {\n        error\n      } = await supabase.from('devices').delete().eq('device_id', deviceId);\n      if (error) throw error;\n      setDeleteConfirm(null);\n    } catch (err) {\n      console.error('Error deleting device:', err);\n      setError(`Failed to delete device: ${err.message}`);\n    }\n  };\n\n  // Update device name\n  const handleUpdateName = async () => {\n    if (!editingDevice) return;\n    try {\n      const {\n        error\n      } = await supabase.from('devices').update({\n        device_name: editName\n      }).eq('device_id', editingDevice.device_id);\n      if (error) throw error;\n\n      // Close the edit dialog\n      setEditingDevice(null);\n    } catch (err) {\n      console.error('Error updating device name:', err);\n      setError(`Failed to update device name: ${err.message}`);\n    }\n  };\n\n  // Dispense food manually\n  const handleDispense = async (device, amount = 10) => {\n    try {\n      // Update device status with dispense command\n      const {\n        error\n      } = await supabase.from('devices').update({\n        last_status: {\n          ...device.last_status,\n          command: 'dispense',\n          command_amount: amount\n        }\n      }).eq('device_id', device.device_id);\n      if (error) throw error;\n\n      // Record the feeding in history\n      const {\n        error: historyError\n      } = await supabase.from('feeding_history').insert([{\n        device_id: device.device_id,\n        time: new Date().toISOString(),\n        amount: amount,\n        manual: true\n      }]);\n      if (historyError) throw historyError;\n      alert(`Dispensing ${amount}g of food from ${device.device_name}!`);\n    } catch (err) {\n      console.error('Error dispensing food:', err);\n      setError(`Failed to dispense food: ${err.message}`);\n    }\n  };\n\n  // Format date for display\n  const formatDate = dateString => {\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  // Render device status badge\n  const renderStatusBadge = device => {\n    var _device$last_status, _device$last_status2;\n    const foodLevel = ((_device$last_status = device.last_status) === null || _device$last_status === void 0 ? void 0 : _device$last_status.food_level) || 0;\n    const lastUpdate = (_device$last_status2 = device.last_status) === null || _device$last_status2 === void 0 ? void 0 : _device$last_status2.last_update;\n\n    // Check if device has updated status in the last 5 minutes\n    const isActive = lastUpdate && Date.now() / 1000 - parseInt(lastUpdate) < 300; // 5 minutes\n\n    if (!isActive) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-badge offline\",\n        children: \"Offline\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 165,\n        columnNumber: 14\n      }, this);\n    }\n    if (foodLevel < 20) {\n      return /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"status-badge warning\",\n        children: \"Low Food\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 14\n      }, this);\n    }\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      className: \"status-badge online\",\n      children: \"Online\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 172,\n      columnNumber: 12\n    }, this);\n  };\n\n  // Render WiFi strength icon\n  const renderWifiStrength = (strength = 0) => {\n    let bars = 0;\n    if (strength < -80) bars = 1;else if (strength < -70) bars = 2;else if (strength < -60) bars = 3;else bars = 4;\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"wifi-strength-icon\",\n      children: Array.from({\n        length: 4\n      }).map((_, i) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `wifi-bar ${i < bars ? 'active' : ''}`\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 187,\n        columnNumber: 11\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 185,\n      columnNumber: 7\n    }, this);\n  };\n  if (loading) {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"loading-container\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"loading-spinner\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 199,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Loading devices...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 200,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"devices-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"devices-header\",\n      children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n        children: \"My Devices\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 208,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/device-setup\",\n        className: \"btn btn-primary\",\n        children: [/*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"icon-plus\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 210,\n          columnNumber: 11\n        }, this), \" Add Device\"]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 209,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 207,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"error-alert\",\n      children: [/*#__PURE__*/_jsxDEV(\"i\", {\n        className: \"icon-warning\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 217,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"error-close\",\n        onClick: () => setError(null),\n        children: \"\\xD7\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 215,\n      columnNumber: 9\n    }, this), devices.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"no-devices\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"no-devices-icon\",\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"icon-device-off\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 230,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 229,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"h2\", {\n        children: \"No devices found\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n        children: \"Get started by adding your first Pet Feeder device.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Link, {\n        to: \"/device-setup\",\n        className: \"btn btn-primary\",\n        children: \"Set Up New Device\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 228,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"devices-grid\",\n      children: devices.map(device => {\n        var _device$last_status3, _device$last_status4, _device$last_status5;\n        const foodLevel = ((_device$last_status3 = device.last_status) === null || _device$last_status3 === void 0 ? void 0 : _device$last_status3.food_level) || 0;\n        const wifiStrength = ((_device$last_status4 = device.last_status) === null || _device$last_status4 === void 0 ? void 0 : _device$last_status4.wifi_strength) || 0;\n        const lastUpdate = (_device$last_status5 = device.last_status) !== null && _device$last_status5 !== void 0 && _device$last_status5.last_update ? new Date(parseInt(device.last_status.last_update) * 1000).toLocaleString() : 'Never';\n        return /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"device-card\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"device-card-header\",\n            children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n              children: device.device_name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 250,\n              columnNumber: 19\n            }, this), renderStatusBadge(device)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 249,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"device-card-content\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"device-metric\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-label\",\n                children: \"Food Level\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 256,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"progress-bar\",\n                children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                  className: \"progress-fill\",\n                  style: {\n                    width: `${foodLevel}%`\n                  }\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 258,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"progress-text\",\n                  children: [foodLevel, \"%\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 262,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 257,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 255,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"device-metric\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-label\",\n                children: \"WiFi Signal\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 267,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"wifi-container\",\n                children: [renderWifiStrength(wifiStrength), /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"wifi-text\",\n                  children: [wifiStrength, \" dBm\"]\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 268,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 266,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"device-metric\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-label\",\n                children: \"Last Update\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 275,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-value\",\n                children: lastUpdate\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 276,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 274,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"device-metric\",\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-label\",\n                children: \"Added On\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 280,\n                columnNumber: 21\n              }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"metric-value\",\n                children: formatDate(device.created_at)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 281,\n                columnNumber: 21\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 279,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 254,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"device-card-actions\",\n            children: [/*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-icon\",\n              onClick: () => {\n                setEditingDevice(device);\n                setEditName(device.device_name);\n              },\n              title: \"Edit Device\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"icon-edit\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 294,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 286,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-icon btn-warning\",\n              onClick: () => handleDispense(device),\n              title: \"Dispense Food\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"icon-food\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 302,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 297,\n              columnNumber: 19\n            }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n              className: \"btn btn-icon btn-danger\",\n              onClick: () => setDeleteConfirm(device.device_id),\n              title: \"Delete Device\",\n              children: /*#__PURE__*/_jsxDEV(\"i\", {\n                className: \"icon-trash\"\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 310,\n                columnNumber: 21\n              }, this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 305,\n              columnNumber: 19\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this)]\n        }, device.device_id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 248,\n          columnNumber: 15\n        }, this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 239,\n      columnNumber: 9\n    }, this), editingDevice && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Edit Device\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close\",\n            onClick: () => setEditingDevice(null),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 325,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"form-group\",\n            children: [/*#__PURE__*/_jsxDEV(\"label\", {\n              htmlFor: \"device-name\",\n              children: \"Device Name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 335,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n              id: \"device-name\",\n              type: \"text\",\n              value: editName,\n              onChange: e => setEditName(e.target.value),\n              placeholder: \"Enter device name\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 336,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 334,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 333,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline\",\n            onClick: () => setEditingDevice(null),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 347,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-primary\",\n            onClick: handleUpdateName,\n            children: \"Save Changes\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 353,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 346,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 9\n    }, this), deleteConfirm && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"modal-overlay\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"modal-content\",\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-header\",\n          children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n            children: \"Confirm Deletion\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 369,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"modal-close\",\n            onClick: () => setDeleteConfirm(null),\n            children: \"\\xD7\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 370,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 368,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-body\",\n          children: /*#__PURE__*/_jsxDEV(\"p\", {\n            className: \"confirm-message\",\n            children: \"Are you sure you want to delete this device? This action cannot be undone.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 379,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 378,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"modal-footer\",\n          children: [/*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-outline\",\n            onClick: () => setDeleteConfirm(null),\n            children: \"Cancel\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 385,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-danger\",\n            onClick: () => handleDelete(deleteConfirm),\n            children: \"Delete Device\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 391,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 367,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 366,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 5\n  }, this);\n};\n_s(Devices, \"YVDFKmMQO3KWFMR7STPCdo1eXfQ=\");\n_c = Devices;\nexport default Devices;\nvar _c;\n$RefreshReg$(_c, \"Devices\");","map":{"version":3,"names":["React","useState","useEffect","Link","supabase","jsxDEV","_jsxDEV","Devices","_s","devices","setDevices","loading","setLoading","error","setError","deleteConfirm","setDeleteConfirm","editingDevice","setEditingDevice","editName","setEditName","fetchDevices","subscription","channel","on","event","schema","table","handleDeviceUpdate","subscribe","unsubscribe","data","user","auth","getUser","Error","from","select","eq","id","order","ascending","err","console","message","payload","eventType","new","newDevice","old","oldDevice","prev","map","device","device_id","filter","handleDelete","deviceId","delete","handleUpdateName","update","device_name","handleDispense","amount","last_status","command","command_amount","historyError","insert","time","Date","toISOString","manual","alert","formatDate","dateString","toLocaleDateString","renderStatusBadge","_device$last_status","_device$last_status2","foodLevel","food_level","lastUpdate","last_update","isActive","now","parseInt","className","children","fileName","_jsxFileName","lineNumber","columnNumber","renderWifiStrength","strength","bars","Array","length","_","i","to","onClick","_device$last_status3","_device$last_status4","_device$last_status5","wifiStrength","wifi_strength","toLocaleString","style","width","created_at","title","htmlFor","type","value","onChange","e","target","placeholder","_c","$RefreshReg$"],"sources":["/workspaces/Smart_Pet_Feeder/src/pages/Devices.tsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Link } from 'react-router-dom';\nimport { supabase } from '../supabaseClient.ts';\nimport { Device } from '../types';\nimport '../styles/Devices.css';\n\nconst Devices: React.FC = () => {\n  const [devices, setDevices] = useState<Device[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [error, setError] = useState<string | null>(null);\n  const [deleteConfirm, setDeleteConfirm] = useState<string | null>(null);\n  const [editingDevice, setEditingDevice] = useState<Device | null>(null);\n  const [editName, setEditName] = useState<string>('');\n\n  useEffect(() => {\n    fetchDevices();\n\n    // Set up realtime subscription for devices\n    const subscription = supabase\n      .channel('devices-changes')\n      .on('postgres_changes', \n        { event: '*', schema: 'public', table: 'devices' },\n        handleDeviceUpdate\n      )\n      .subscribe();\n    \n    return () => {\n      subscription.unsubscribe();\n    };\n  }, []);\n\n  const fetchDevices = async () => {\n    try {\n      setLoading(true);\n      \n      // Get current user\n      const { data: { user } } = await supabase.auth.getUser();\n      if (!user) throw new Error('User not authenticated');\n      \n      // Fetch user's devices\n      const { data, error } = await supabase\n        .from('devices')\n        .select('*')\n        .eq('user_id', user.id)\n        .order('created_at', { ascending: false });\n        \n      if (error) throw error;\n      \n      setDevices(data || []);\n    } catch (err: any) {\n      console.error('Error fetching devices:', err);\n      setError(err.message || 'Failed to load devices');\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  // Handle realtime device updates\n  const handleDeviceUpdate = (payload: any) => {\n    const { eventType, new: newDevice, old: oldDevice } = payload;\n    \n    if (eventType === 'INSERT') {\n      setDevices(prev => [newDevice, ...prev]);\n    } else if (eventType === 'UPDATE') {\n      setDevices(prev => \n        prev.map(device => \n          device.device_id === newDevice.device_id ? newDevice : device\n        )\n      );\n    } else if (eventType === 'DELETE') {\n      setDevices(prev => \n        prev.filter(device => device.device_id !== oldDevice.device_id)\n      );\n    }\n  };\n\n  // Delete a device\n  const handleDelete = async (deviceId: string) => {\n    try {\n      const { error } = await supabase\n        .from('devices')\n        .delete()\n        .eq('device_id', deviceId);\n        \n      if (error) throw error;\n      \n      setDeleteConfirm(null);\n    } catch (err: any) {\n      console.error('Error deleting device:', err);\n      setError(`Failed to delete device: ${err.message}`);\n    }\n  };\n\n  // Update device name\n  const handleUpdateName = async () => {\n    if (!editingDevice) return;\n    \n    try {\n      const { error } = await supabase\n        .from('devices')\n        .update({ device_name: editName })\n        .eq('device_id', editingDevice.device_id);\n        \n      if (error) throw error;\n      \n      // Close the edit dialog\n      setEditingDevice(null);\n    } catch (err: any) {\n      console.error('Error updating device name:', err);\n      setError(`Failed to update device name: ${err.message}`);\n    }\n  };\n\n  // Dispense food manually\n  const handleDispense = async (device: Device, amount: number = 10) => {\n    try {\n      // Update device status with dispense command\n      const { error } = await supabase\n        .from('devices')\n        .update({\n          last_status: {\n            ...device.last_status,\n            command: 'dispense',\n            command_amount: amount\n          }\n        })\n        .eq('device_id', device.device_id);\n        \n      if (error) throw error;\n      \n      // Record the feeding in history\n      const { error: historyError } = await supabase\n        .from('feeding_history')\n        .insert([{\n          device_id: device.device_id,\n          time: new Date().toISOString(),\n          amount: amount,\n          manual: true\n        }]);\n        \n      if (historyError) throw historyError;\n      \n      alert(`Dispensing ${amount}g of food from ${device.device_name}!`);\n    } catch (err: any) {\n      console.error('Error dispensing food:', err);\n      setError(`Failed to dispense food: ${err.message}`);\n    }\n  };\n\n  // Format date for display\n  const formatDate = (dateString: string) => {\n    return new Date(dateString).toLocaleDateString();\n  };\n\n  // Render device status badge\n  const renderStatusBadge = (device: Device) => {\n    const foodLevel = device.last_status?.food_level || 0;\n    const lastUpdate = device.last_status?.last_update;\n    \n    // Check if device has updated status in the last 5 minutes\n    const isActive = lastUpdate && \n      (Date.now() / 1000 - parseInt(lastUpdate)) < 300; // 5 minutes\n    \n    if (!isActive) {\n      return <span className=\"status-badge offline\">Offline</span>;\n    }\n    \n    if (foodLevel < 20) {\n      return <span className=\"status-badge warning\">Low Food</span>;\n    }\n    \n    return <span className=\"status-badge online\">Online</span>;\n  };\n\n  // Render WiFi strength icon\n  const renderWifiStrength = (strength: number = 0) => {\n    let bars = 0;\n    \n    if (strength < -80) bars = 1;\n    else if (strength < -70) bars = 2;\n    else if (strength < -60) bars = 3;\n    else bars = 4;\n    \n    return (\n      <div className=\"wifi-strength-icon\">\n        {Array.from({ length: 4 }).map((_, i) => (\n          <div \n            key={i}\n            className={`wifi-bar ${i < bars ? 'active' : ''}`}\n          ></div>\n        ))}\n      </div>\n    );\n  };\n\n  if (loading) {\n    return (\n      <div className=\"loading-container\">\n        <div className=\"loading-spinner\"></div>\n        <p>Loading devices...</p>\n      </div>\n    );\n  }\n\n  return (\n    <div className=\"devices-container\">\n      <div className=\"devices-header\">\n        <h1>My Devices</h1>\n        <Link to=\"/device-setup\" className=\"btn btn-primary\">\n          <i className=\"icon-plus\"></i> Add Device\n        </Link>\n      </div>\n      \n      {error && (\n        <div className=\"error-alert\">\n          <i className=\"icon-warning\"></i>\n          <p>{error}</p>\n          <button \n            className=\"error-close\" \n            onClick={() => setError(null)}\n          >\n            &times;\n          </button>\n        </div>\n      )}\n      \n      {devices.length === 0 ? (\n        <div className=\"no-devices\">\n          <div className=\"no-devices-icon\">\n            <i className=\"icon-device-off\"></i>\n          </div>\n          <h2>No devices found</h2>\n          <p>Get started by adding your first Pet Feeder device.</p>\n          <Link to=\"/device-setup\" className=\"btn btn-primary\">\n            Set Up New Device\n          </Link>\n        </div>\n      ) : (\n        <div className=\"devices-grid\">\n          {devices.map((device) => {\n            const foodLevel = device.last_status?.food_level || 0;\n            const wifiStrength = device.last_status?.wifi_strength || 0;\n            const lastUpdate = device.last_status?.last_update \n              ? new Date(parseInt(device.last_status.last_update) * 1000).toLocaleString()\n              : 'Never';\n            \n            return (\n              <div key={device.device_id} className=\"device-card\">\n                <div className=\"device-card-header\">\n                  <h3>{device.device_name}</h3>\n                  {renderStatusBadge(device)}\n                </div>\n                \n                <div className=\"device-card-content\">\n                  <div className=\"device-metric\">\n                    <div className=\"metric-label\">Food Level</div>\n                    <div className=\"progress-bar\">\n                      <div \n                        className=\"progress-fill\" \n                        style={{ width: `${foodLevel}%` }}\n                      ></div>\n                      <span className=\"progress-text\">{foodLevel}%</span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"device-metric\">\n                    <div className=\"metric-label\">WiFi Signal</div>\n                    <div className=\"wifi-container\">\n                      {renderWifiStrength(wifiStrength)}\n                      <span className=\"wifi-text\">{wifiStrength} dBm</span>\n                    </div>\n                  </div>\n                  \n                  <div className=\"device-metric\">\n                    <div className=\"metric-label\">Last Update</div>\n                    <div className=\"metric-value\">{lastUpdate}</div>\n                  </div>\n                  \n                  <div className=\"device-metric\">\n                    <div className=\"metric-label\">Added On</div>\n                    <div className=\"metric-value\">{formatDate(device.created_at)}</div>\n                  </div>\n                </div>\n                \n                <div className=\"device-card-actions\">\n                  <button \n                    className=\"btn btn-icon\" \n                    onClick={() => {\n                      setEditingDevice(device);\n                      setEditName(device.device_name);\n                    }}\n                    title=\"Edit Device\"\n                  >\n                    <i className=\"icon-edit\"></i>\n                  </button>\n                  \n                  <button \n                    className=\"btn btn-icon btn-warning\" \n                    onClick={() => handleDispense(device)}\n                    title=\"Dispense Food\"\n                  >\n                    <i className=\"icon-food\"></i>\n                  </button>\n                  \n                  <button \n                    className=\"btn btn-icon btn-danger\" \n                    onClick={() => setDeleteConfirm(device.device_id)}\n                    title=\"Delete Device\"\n                  >\n                    <i className=\"icon-trash\"></i>\n                  </button>\n                </div>\n              </div>\n            );\n          })}\n        </div>\n      )}\n      \n      {/* Edit Device Modal */}\n      {editingDevice && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Edit Device</h2>\n              <button \n                className=\"modal-close\" \n                onClick={() => setEditingDevice(null)}\n              >\n                &times;\n              </button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <div className=\"form-group\">\n                <label htmlFor=\"device-name\">Device Name</label>\n                <input\n                  id=\"device-name\"\n                  type=\"text\"\n                  value={editName}\n                  onChange={(e) => setEditName(e.target.value)}\n                  placeholder=\"Enter device name\"\n                />\n              </div>\n            </div>\n            \n            <div className=\"modal-footer\">\n              <button \n                className=\"btn btn-outline\" \n                onClick={() => setEditingDevice(null)}\n              >\n                Cancel\n              </button>\n              <button \n                className=\"btn btn-primary\" \n                onClick={handleUpdateName}\n              >\n                Save Changes\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n      \n      {/* Delete Confirmation Modal */}\n      {deleteConfirm && (\n        <div className=\"modal-overlay\">\n          <div className=\"modal-content\">\n            <div className=\"modal-header\">\n              <h2>Confirm Deletion</h2>\n              <button \n                className=\"modal-close\" \n                onClick={() => setDeleteConfirm(null)}\n              >\n                &times;\n              </button>\n            </div>\n            \n            <div className=\"modal-body\">\n              <p className=\"confirm-message\">\n                Are you sure you want to delete this device? This action cannot be undone.\n              </p>\n            </div>\n            \n            <div className=\"modal-footer\">\n              <button \n                className=\"btn btn-outline\" \n                onClick={() => setDeleteConfirm(null)}\n              >\n                Cancel\n              </button>\n              <button \n                className=\"btn btn-danger\" \n                onClick={() => handleDelete(deleteConfirm)}\n              >\n                Delete Device\n              </button>\n            </div>\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default Devices;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}